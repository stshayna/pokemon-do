<div class="container pt-5 my-5">
  <div class="row">
    <div class="col-12 col-lg-7">
      <div class="show-card border shadow animate__animated">
        <h2><%= @pokemon.name.capitalize %></h2>
        <div class="badges d-flex justify-content-around py-3">
          <p>Species: %= @pokemon.species %></p>
          <p>★ <%= @pokemon.average_rating ? @pokemon.average_rating : "0" %></p>
          <p><%= pluralize(@pokemon_reviews.count, 'review') %></p>
          <p><i class="fa-solid fa-map-pin"></i> <%= @pokemon.location.capitalize %></p>
        </div>
        <img src=<%= @pokemon.image_url %> alt="Pokemon">
        <p><i class="fa-solid fa-screwdriver-wrench fa-lg"></i> <%= @pokemon.description %></p>
        <p><i class="fa-solid fa-dollar-sign fa-lg"></i> <%= @pokemon.price %> CAD<span> day</span></p>
        <p><i class="fa-regular fa-id-card fa-lg"></i> <%= @pokemon.user.username.capitalize %></p>
      </div>
    </div>

    <div class="col-12 col-lg-5">
      <div class="booking border shadow">
       <p><b>Status</b> : <% if @pokemon.status %> Available </p>
          <% else %>
            <p>Not available</p>
          <% end %>
        <h4>Book This Pokémon</h4>

        <% if current_user.id != @pokemon.user_id  %>
          <%= simple_form_for [@pokemon, @booking] do |f| %>
            <p><%= f.input :start_date %></p>
            <p><%= f.input :end_date %></p>
            <%= f.submit class: 'btn-submit-movie mt-3' %>
          <% end %>
        <% else %>
          <p>You can't rent your own Pokémon!</p>
        <% end %>
      </div>
      
      <div class="reviews my-5">
        <h4><% (1..5).to_a.each do |i| %>
              <%= @pokemon.average_rating && @pokemon.average_rating >= i ? '★' : '☆' %>
            <% end %>
            (<%= pluralize(@pokemon_reviews.count, "Review") %>)
        </h4>
        <div class="review-details my-3 shadow">
          <% if (@pokemon_reviews.blank?) %>
            <p><%= @pokemon.name %> hasn't received any reviews.</p>
          <% else %>
            <% @pokemon_reviews.each_with_index do |p_review, i| %>
              <p><%= p_review.booking.user.username.capitalize %> - <span class="text-muted"><%= p_review.created_at.to_s.split(' ')[0] %></span></p>
              <p><i class="fa-solid fa-comment"></i> <%= p_review.content %></p>
            <% end %>
          <% end %>
        </div>
        <div>
          <%= link_to "Back", pokemons_path %>
        </div>
      </div>
    </div>
  </div>
</div>
